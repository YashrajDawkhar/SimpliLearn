{"version":3,"file":"ng-go-top-button.js","sources":["../../../projects/ng-go-top-button/src/lib/ng-go-top-button.component.ts","../../../projects/ng-go-top-button/src/lib/ng-go-top-button.module.ts","../../../projects/ng-go-top-button/src/public-api.ts","../../../projects/ng-go-top-button/src/ng-go-top-button.ts"],"sourcesContent":["import {Component, HostListener, Input, OnInit, ViewEncapsulation} from '@angular/core';\nimport {trigger, state, style, transition, animate} from '@angular/animations';\n\n@Component({\n  selector: 'ng-go-top-button', // tslint:disable-line\n  template: `\n    <button type=\"button\" aria-label=\"go to top of page\"\n            [tabIndex]=\"tabIndex\"\n            [@appearInOut]=\"animationState\"\n            (click)=\"scrollTop($event)\"\n            [ngStyle]=\"getStyle()\"\n            [ngClass]=\"classNames\">\n      <ng-content></ng-content>\n    </button>`,\n  encapsulation: ViewEncapsulation.None,\n  styles: [\n      `.go-top-button {\n      position: fixed;\n      cursor: pointer;\n      outline: none;\n      top: 50%;\n      bottom: 50%;\n      right: 0;\n      width: 35px;\n      height: 35px;\n      line-height: 35px;\n      text-decoration: none;\n      color: #ffffff;\n      background: rgba(0, 0, 0, 0.3);\n      border: none;\n      border-radius: 3px 0 0 3px;\n    }\n\n    .go-top-button:hover, .go-top-button:focus {\n      background-color: rgba(0, 0, 0, 0.6);\n      text-decoration: none;\n      color: white;\n    }`\n  ],\n  animations: [\n    trigger('appearInOut', [\n      state('in', style({\n        opacity: '0.85'\n      })),\n      state('out', style({\n        opacity: '0'\n      })),\n      transition('in => out', animate('400ms ease-in-out')),\n      transition('out => in', animate('400ms ease-in-out'))\n    ]),\n  ],\n})\n\n/**\n * Component for adding a go-to-top button to scrollable browser content\n */\nexport class NgGoTopButtonComponent implements OnInit {\n  animationState = 'out';\n  private timerID: any = null;\n\n  /**\n   * Go top button will appear when user scrolls Y to this position\n   */\n  @Input() scrollDistance = 200;\n\n  /**\n   * User styles config object\n   */\n  @Input() styles: any = {};\n\n  /**\n   * Classes to be applied to the button\n   */\n  @Input() classNames = 'go-top-button';\n\n  /**\n   * If true scrolling to top will be animated\n   */\n  @Input() animate = false;\n\n  /**\n   * Animated scrolling speed\n   */\n  @Input() speed = 80;\n\n  /**\n   * Acceleration coefficient, added to speed when using animated scroll\n   */\n  @Input() acceleration = 0;\n\n  /**\n   * Button tabIndex HTML attribute\n   */\n  @Input() tabIndex = 0;\n\n  ngOnInit() {\n    this.validateInputs();\n  }\n\n  private validateInputs() {\n    const errorMessagePrefix = 'GoTopButton component input validation error: ';\n\n    if (this.scrollDistance < 0) {\n      throw Error(errorMessagePrefix + '\\'scrollDistance\\' parameter must be greater or equal to 0');\n    }\n\n    if (this.speed < 1) {\n      throw Error(errorMessagePrefix + '\\'speed\\' parameter must be a positive number');\n    }\n\n    if (this.acceleration < 0) {\n      throw Error(errorMessagePrefix + '\\'acceleration\\' parameter must be greater or equal to 0');\n    }\n\n    if (typeof this.classNames !== 'string') {\n      throw Error(errorMessagePrefix + '\\'classNames\\' parameter must be a string like \\'class1 class2 class3\\'');\n    }\n  }\n\n  /**\n   * Listens to window scroll and animates the button\n   */\n  @HostListener('window:scroll', [])\n  onWindowScroll() {\n    if (this.isBrowser()) {\n      this.animationState = this.getCurrentScrollTop() > this.scrollDistance ? 'in' : 'out';\n    }\n  }\n\n  /**\n   * Scrolls window to top\n   */\n  scrollTop(event: any) {\n    if (!this.isBrowser()) {\n      return;\n    }\n\n    event.preventDefault();\n    if (this.animate) {\n      this.animateScrollTop();\n    } else {\n      window.scrollTo(0, 0);\n    }\n  }\n\n  /**\n   * Performs the animated scroll to top\n   */\n  animateScrollTop() {\n    if (this.timerID !== null) {\n      return;\n    }\n\n    let initialSpeed = this.speed;\n\n    this.timerID = setInterval(() => {\n      window.scrollBy(0, -initialSpeed);\n      initialSpeed = initialSpeed + this.acceleration;\n      if (this.getCurrentScrollTop() === 0) {\n        clearInterval(this.timerID);\n        this.timerID = null;\n      }\n    }, 15);\n  }\n\n  /**\n   * Get current Y scroll position\n   */\n  getCurrentScrollTop() {\n    if (typeof window.scrollY !== 'undefined' && window.scrollY >= 0) {\n      return window.scrollY;\n    }\n\n    if (typeof window.pageYOffset !== 'undefined' && window.pageYOffset >= 0) {\n      return window.pageYOffset;\n    }\n\n    if (typeof document.body.scrollTop !== 'undefined' && document.body.scrollTop >= 0) {\n      return document.body.scrollTop;\n    }\n\n    if (typeof document.documentElement.scrollTop !== 'undefined' && document.documentElement.scrollTop >= 0) {\n      return document.documentElement.scrollTop;\n    }\n\n    return 0;\n  }\n\n  /**\n   * Get button style\n   */\n  getStyle() {\n    return this.styles || {};\n  }\n\n  /**\n   * This check will prevent 'window' logic to be executed\n   * while executing the server rendering\n   */\n  isBrowser(): boolean {\n    return typeof (window) !== 'undefined';\n  }\n}\n","import {NgGoTopButtonComponent} from './ng-go-top-button.component';\nimport {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [NgGoTopButtonComponent],\n  exports: [NgGoTopButtonComponent]\n})\n\nexport class GoTopButtonModule {\n}\n","/*\n * Public API Surface of ng-go-top-button\n */\n\nexport * from './lib/ng-go-top-button.component';\nexport * from './lib/ng-go-top-button.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}